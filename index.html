<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker Pro V2</title>

```
<!-- React & Dependencies -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<!-- PWA Meta Tags fÃ¼r iPhone -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Habit Tracker Pro">
<meta name="theme-color" content="#3b82f6">

<!-- Icons -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='80'>ðŸŽ¯</text></svg>">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='80'>ðŸŽ¯</text></svg>">

<!-- Lucide Icons (CDN Alternative) -->
<style>
    .lucide { width: 24px; height: 24px; stroke: currentColor; stroke-width: 2; fill: none; }
    .icon-plus { stroke-linecap: round; stroke-linejoin: round; }
    .icon-check { stroke-linecap: round; stroke-linejoin: round; }
    .icon-x { stroke-linecap: round; stroke-linejoin: round; }
    .icon-calendar { stroke-linecap: round; stroke-linejoin: round; }
    .icon-bar-chart-3 { stroke-linecap: round; stroke-linejoin: round; }
    .icon-heart { stroke-linecap: round; stroke-linejoin: round; }
    .icon-home { stroke-linecap: round; stroke-linejoin: round; }
    .icon-flame { stroke-linecap: round; stroke-linejoin: round; }
    .icon-clock { stroke-linecap: round; stroke-linejoin: round; }
    .icon-chevron-left { stroke-linecap: round; stroke-linejoin: round; }
    .icon-chevron-right { stroke-linecap: round; stroke-linejoin: round; }
    .icon-sun { stroke-linecap: round; stroke-linejoin: round; }
    .icon-moon { stroke-linecap: round; stroke-linejoin: round; }
    .icon-bell { stroke-linecap: round; stroke-linejoin: round; }
    .icon-award { stroke-linecap: round; stroke-linejoin: round; }
</style>
```

</head>
<body>
    <div id="root"></div>

```
<script type="text/babel">
    const { useState, useEffect } = React;

    // Icon Components (Simplified)
    const Plus = () => (
        <svg className="lucide icon-plus" viewBox="0 0 24 24">
            <path d="M5 12h14M12 5v14"/>
        </svg>
    );

    const Check = () => (
        <svg className="lucide icon-check" viewBox="0 0 24 24">
            <path d="M20 6 9 17l-5-5"/>
        </svg>
    );

    const X = () => (
        <svg className="lucide icon-x" viewBox="0 0 24 24">
            <path d="M18 6 6 18M6 6l12 12"/>
        </svg>
    );

    const Calendar = () => (
        <svg className="lucide icon-calendar" viewBox="0 0 24 24">
            <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
            <line x1="16" x2="16" y1="2" y2="6"/>
            <line x1="8" x2="8" y1="2" y2="6"/>
            <line x1="3" x2="21" y1="10" y2="10"/>
        </svg>
    );

    const BarChart3 = () => (
        <svg className="lucide icon-bar-chart-3" viewBox="0 0 24 24">
            <path d="M3 3v18h18"/>
            <path d="M18 17V9"/>
            <path d="M13 17V5"/>
            <path d="M8 17v-3"/>
        </svg>
    );

    const Heart = () => (
        <svg className="lucide icon-heart" viewBox="0 0 24 24">
            <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7 7-7Z"/>
        </svg>
    );

    const Home = () => (
        <svg className="lucide icon-home" viewBox="0 0 24 24">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9,22 9,12 15,12 15,22"/>
        </svg>
    );

    const Flame = () => (
        <svg className="lucide icon-flame" viewBox="0 0 24 24">
            <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5Z"/>
        </svg>
    );

    const Clock = () => (
        <svg className="lucide icon-clock" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12,6 12,12 16,14"/>
        </svg>
    );

    const ChevronLeft = () => (
        <svg className="lucide icon-chevron-left" viewBox="0 0 24 24">
            <path d="m15 18-6-6 6-6"/>
        </svg>
    );

    const ChevronRight = () => (
        <svg className="lucide icon-chevron-right" viewBox="0 0 24 24">
            <path d="m9 18 6-6-6-6"/>
        </svg>
    );

    const Sun = () => (
        <svg className="lucide icon-sun" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="4"/>
            <path d="m12 2 0 2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
        </svg>
    );

    const Moon = () => (
        <svg className="lucide icon-moon" viewBox="0 0 24 24">
            <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
        </svg>
    );

    const Bell = () => (
        <svg className="lucide icon-bell" viewBox="0 0 24 24">
            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
            <path d="m13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
    );

    const Award = () => (
        <svg className="lucide icon-award" viewBox="0 0 24 24">
            <circle cx="12" cy="8" r="6"/>
            <path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/>
        </svg>
    );

    const HabitTracker = () => {
        const [habits, setHabits] = useState([]);
        const [selectedDate, setSelectedDate] = useState(new Date());
        const [view, setView] = useState('today');
        const [showAddHabit, setShowAddHabit] = useState(false);
        const [darkMode, setDarkMode] = useState(false);
        const [moods, setMoods] = useState({});
        const [selectedMood, setSelectedMood] = useState(null);
        const [moodNote, setMoodNote] = useState('');
        const [calendarDate, setCalendarDate] = useState(new Date());
        
        const [newHabit, setNewHabit] = useState({
            name: '',
            category: 'health',
            target: 1,
            unit: 'mal',
            reminderTime: '09:00',
            color: 'blue'
        });

        const moodTypes = {
            excellent: { icon: 'ðŸ¤©', name: 'Ausgezeichnet', color: 'text-green-500', bgColor: 'bg-green-100' },
            good: { icon: 'ðŸ˜Š', name: 'Gut', color: 'text-blue-500', bgColor: 'bg-blue-100' },
            okay: { icon: 'ðŸ˜', name: 'Okay', color: 'text-yellow-500', bgColor: 'bg-yellow-100' },
            bad: { icon: 'ðŸ˜ž', name: 'Schlecht', color: 'text-orange-500', bgColor: 'bg-orange-100' },
            terrible: { icon: 'ðŸ˜¢', name: 'Furchtbar', color: 'text-red-500', bgColor: 'bg-red-100' }
        };

        useEffect(() => {
            const today = new Date().toISOString().split('T')[0];
            const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
            
            setHabits([
                {
                    id: 1,
                    name: 'Wasser trinken',
                    category: 'health',
                    target: 8,
                    unit: 'GlÃ¤ser',
                    color: 'blue',
                    reminderTime: '09:00',
                    completions: {
                        [today]: { completed: 5, target: 8 },
                        [yesterday]: { completed: 8, target: 8 },
                        '2025-09-25': { completed: 6, target: 8 },
                        '2025-09-24': { completed: 8, target: 8 },
                        '2025-09-23': { completed: 4, target: 8 }
                    }
                },
                {
                    id: 2,
                    name: 'Sport treiben',
                    category: 'fitness',
                    target: 1,
                    unit: 'mal',
                    color: 'green',
                    reminderTime: '18:00',
                    completions: {
                        [today]: { completed: 0, target: 1 },
                        [yesterday]: { completed: 1, target: 1 },
                        '2025-09-25': { completed: 1, target: 1 },
                        '2025-09-24': { completed: 0, target: 1 },
                        '2025-09-23': { completed: 1, target: 1 }
                    }
                },
                {
                    id: 3,
                    name: 'Lesen',
                    category: 'learning',
                    target: 30,
                    unit: 'Minuten',
                    color: 'purple',
                    reminderTime: '20:00',
                    completions: {
                        [today]: { completed: 15, target: 30 },
                        [yesterday]: { completed: 30, target: 30 },
                        '2025-09-25': { completed: 45, target: 30 },
                        '2025-09-24': { completed: 20, target: 30 },
                        '2025-09-23': { completed: 30, target: 30 }
                    }
                }
            ]);

            setMoods({
                [today]: { mood: 'good', note: 'Produktiver Tag!' },
                [yesterday]: { mood: 'excellent', note: 'Alles super gelaufen' },
                '2025-09-25': { mood: 'okay', note: 'Durchschnittlicher Tag' },
                '2025-09-24': { mood: 'bad', note: 'Stressiger Arbeitstag' },
                '2025-09-23': { mood: 'good', note: 'Gutes Workout heute' }
            });
        }, []);

        const categories = {
            health: { name: 'Gesundheit', icon: 'ðŸ¥', color: 'bg-green-100 text-green-800' },
            fitness: { name: 'Fitness', icon: 'ðŸ’ª', color: 'bg-blue-100 text-blue-800' },
            learning: { name: 'Lernen', icon: 'ðŸ“š', color: 'bg-purple-100 text-purple-800' },
            productivity: { name: 'ProduktivitÃ¤t', icon: 'âš¡', color: 'bg-yellow-100 text-yellow-800' },
            mindfulness: { name: 'Achtsamkeit', icon: 'ðŸ§˜', color: 'bg-indigo-100 text-indigo-800' }
        };

        const colors = {
            blue: 'bg-blue-500',
            green: 'bg-green-500',
            purple: 'bg-purple-500',
            red: 'bg-red-500',
            yellow: 'bg-yellow-500',
            indigo: 'bg-indigo-500'
        };

        const addHabit = () => {
            if (newHabit.name.trim()) {
                const habit = {
                    id: Date.now(),
                    ...newHabit,
                    completions: {}
                };
                setHabits([...habits, habit]);
                setNewHabit({
                    name: '',
                    category: 'health',
                    target: 1,
                    unit: 'mal',
                    reminderTime: '09:00',
                    color: 'blue'
                });
                setShowAddHabit(false);
            }
        };

        const updateHabitProgress = (habitId, date, increment = true) => {
            setHabits(habits.map(habit => {
                if (habit.id === habitId) {
                    const dateStr = date.toISOString().split('T')[0];
                    const currentCompletion = habit.completions[dateStr] || { completed: 0, target: habit.target };
                    const newCompleted = increment 
                        ? Math.min(currentCompletion.completed + 1, habit.target)
                        : Math.max(currentCompletion.completed - 1, 0);
                    
                    return {
                        ...habit,
                        completions: {
                            ...habit.completions,
                            [dateStr]: { ...currentCompletion, completed: newCompleted }
                        }
                    };
                }
                return habit;
            }));
        };

        const saveMood = (date, moodType, note = '') => {
            const dateStr = date.toISOString().split('T')[0];
            setMoods({
                ...moods,
                [dateStr]: { mood: moodType, note }
            });
        };

        const getStreakData = (habit) => {
            const dates = Object.keys(habit.completions).sort().reverse();
            let currentStreak = 0;
            let longestStreak = 0;
            let tempStreak = 0;

            const today = new Date().toISOString().split('T')[0];
            let checkingCurrent = true;

            for (let date of dates) {
                const completion = habit.completions[date];
                const isComplete = completion.completed >= completion.target;

                if (isComplete) {
                    tempStreak++;
                    if (checkingCurrent && date <= today) {
                        currentStreak = tempStreak;
                    }
                } else {
                    if (checkingCurrent) {
                        checkingCurrent = false;
                    }
                    longestStreak = Math.max(longestStreak, tempStreak);
                    tempStreak = 0;
                }
            }
            longestStreak = Math.max(longestStreak, tempStreak);

            return { currentStreak, longestStreak };
        };

        const getDaysInMonth = (date) => {
            const year = date.getFullYear();
            const month = date.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startDay = firstDay.getDay();

            const days = [];
            
            for (let i = 0; i < startDay; i++) {
                days.push(null);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                days.push(new Date(year, month, day));
            }
            
            return days;
        };

        const getHabitCompletionForDate = (habit, date) => {
            const dateStr = date.toISOString().split('T')[0];
            const completion = habit.completions[dateStr];
            if (!completion) return 0;
            return (completion.completed / completion.target) * 100;
        };

        const getDayOverallCompletion = (date) => {
            if (habits.length === 0) return 0;
            const total = habits.reduce((sum, habit) => {
                return sum + getHabitCompletionForDate(habit, date);
            }, 0);
            return total / habits.length;
        };

        const renderCalendarView = () => {
            const days = getDaysInMonth(calendarDate);
            const monthName = calendarDate.toLocaleDateString('de-DE', { month: 'long', year: 'numeric' });

            return React.createElement('div', { className: 'space-y-6' },
                React.createElement('div', { className: 'flex items-center justify-between' },
                    React.createElement('h2', { 
                        className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}` 
                    }, 'Kalenderansicht'),
                    React.createElement('div', { className: 'flex items-center gap-3' },
                        React.createElement('button', {
                            onClick: () => setCalendarDate(new Date(calendarDate.getFullYear(), calendarDate.getMonth() - 1)),
                            className: `p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-100'}`
                        }, React.createElement(ChevronLeft, { size: 20 })),
                        React.createElement('span', { 
                            className: `font-medium min-w-48 text-center ${darkMode ? 'text-white' : 'text-gray-800'}` 
                        }, monthName),
                        React.createElement('button', {
                            onClick: () => setCalendarDate(new Date(calendarDate.getFullYear(), calendarDate.getMonth() + 1)),
                            className: `p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-100'}`
                        }, React.createElement(ChevronRight, { size: 20 }))
                    )
                ),
                React.createElement('div', { className: `rounded-2xl shadow-lg p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}` },
                    React.createElement('div', { className: 'grid grid-cols-7 gap-2 mb-4' },
                        ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'].map(day => 
                            React.createElement('div', {
                                key: day,
                                className: `text-center font-medium p-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`
                            }, day)
                        )
                    ),
                    React.createElement('div', { className: 'grid grid-cols-7 gap-2' },
                        days.map((day, index) => {
                            if (!day) {
                                return React.createElement('div', { key: index, className: 'p-2' });
                            }

                            const dateStr = day.toISOString().split('T')[0];
                            const isToday = dateStr === new Date().toISOString().split('T')[0];
                            const isSelected = dateStr === selectedDate.toISOString().split('T')[0];
                            const overallCompletion = getDayOverallCompletion(day);
                            const dayMood = moods[dateStr];

                            return React.createElement('button', {
                                key: index,
                                onClick: () => {
                                    setSelectedDate(day);
                                    setView('today');
                                },
                                className: `relative p-3 rounded-xl transition-all duration-200 hover:scale-105 ${
                                    isSelected 
                                        ? 'bg-blue-500 text-white shadow-lg' 
                                        : isToday
                                        ? darkMode ? 'bg-gray-700 text-white ring-2 ring-blue-500' : 'bg-blue-100 text-blue-800'
                                        : darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-50 hover:bg-gray-100'
                                }`
                            },
                                React.createElement('div', { className: 'text-sm font-medium' }, day.getDate()),
                                habits.length > 0 && React.createElement('div', { 
                                    className: `w-full h-1 rounded-full mt-2 ${darkMode ? 'bg-gray-600' : 'bg-gray-300'}` 
                                },
                                    React.createElement('div', {
                                        className: `h-1 rounded-full transition-all ${
                                            overallCompletion >= 80 ? 'bg-green-500' :
                                            overallCompletion >= 60 ? 'bg-yellow-500' :
                                            overallCompletion >= 40 ? 'bg-orange-500' :
                                            overallCompletion > 0 ? 'bg-red-500' : 'bg-gray-400'
                                        }`,
                                        style: { width: `${overallCompletion}%` }
                                    })
                                ),
                                dayMood && React.createElement('div', { 
                                    className: 'absolute -top-1 -right-1 text-lg' 
                                }, moodTypes[dayMood.mood]?.icon),
                                isToday && React.createElement('div', { 
                                    className: 'absolute -bottom-1 left-1/2 transform -translate-x-1/2' 
                                },
                                    React.createElement('div', { className: 'w-2 h-2 bg-blue-500 rounded-full' })
                                )
                            );
                        })
                    )
                )
            );
        };

        const renderMoodView = () => {
            const today = selectedDate.toISOString().split('T')[0];
            const currentMood = moods[today];

            return React.createElement('div', { className: 'space-y-6' },
                React.createElement('div', { className: 'flex items-center justify-between' },
                    React.createElement('h2', { 
                        className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}` 
                    }, 'Stimmung Tracker ðŸŽ­'),
                    React.createElement('div', { className: 'flex gap-2' },
                        React.createElement('button', {
                            onClick: () => setSelectedDate(new Date(selectedDate.getTime() - 86400000)),
                            className: `p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-100'}`
                        }, React.createElement(ChevronLeft, { size: 20 })),
                        React.createElement('button', {
                            onClick: () => setSelectedDate(new Date(selectedDate.getTime() + 86400000)),
                            className: `p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-100'}`
                        }, React.createElement(ChevronRight, { size: 20 }))
                    )
                ),
                React.createElement('div', { 
                    className: `text-center ${darkMode ? 'text-gray-300' : 'text-gray-600'}` 
                }, selectedDate.toLocaleDateString('de-DE', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                })),
                currentMood && React.createElement('div', { 
                    className: `p-6 rounded-2xl shadow-lg text-center ${darkMode ? 'bg-gray-800' : 'bg-white'}` 
                },
                    React.createElement('div', { className: 'text-6xl mb-4' }, moodTypes[currentMood.mood]?.icon),
                    React.createElement('h3', { 
                        className: `text-2xl font-bold mb-2 ${moodTypes[currentMood.mood]?.color}` 
                    }, moodTypes[currentMood.mood]?.name),
                    currentMood.note && React.createElement('p', { 
                        className: `text-lg ${darkMode ? 'text-gray-300' : 'text-gray-600'}` 
                    }, `"${currentMood.note}"`),
                    React.createElement('button', {
                        onClick: () => {
                            setSelectedMood(currentMood.mood);
                            setMoodNote(currentMood.note);
                        },
                        className: 'mt-4 px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all'
                    }, 'Bearbeiten')
                ),
                React.createElement('div', { 
                    className: `p-6 rounded-2xl shadow-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}` 
                },
                    React.createElement('h3', { 
                        className: `text-xl font-semibold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}` 
                    }, 'Wie fÃ¼hlst du dich heute?'),
                    React.createElement('div', { className: 'grid grid-cols-5 gap-3 mb-6' },
                        Object.entries(moodTypes).map(([key, mood]) =>
                            React.createElement('button', {
                                key: key,
                                onClick: () => setSelectedMood(key),
                                className: `p-4 rounded-xl text-center transition-all duration-200 hover:scale-110 ${
                                    selectedMood === key 
                                        ? `${mood.bgColor} ring-2 ring-blue-500 scale-105` 
                                        : darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-50 hover:bg-gray-100'
                                }`
                            },
                                React.createElement('div', { className: 'text-3xl mb-2' }, mood.icon),
                                React.createElement('div', { 
                                    className: `text-sm font-medium ${
                                        selectedMood === key ? mood.color : darkMode ? 'text-white' : 'text-gray-800'
                                    }` 
                                }, mood.name)
                            )
                        )
                    ),
                    selectedMood && React.createElement('div', { className: 'space-y-4' },
                        React.createElement('textarea', {
                            placeholder: 'Notiz zu deiner Stimmung (optional)...',
                            value: moodNote,
                            onChange: (e) => setMoodNote(e.target.value),
                            className: `w-full p-4 rounded-xl border resize-none h-24 ${
                                darkMode 
                                    ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                                    : 'bg-gray-50 border-gray-200 placeholder-gray-500'
                            }`
```